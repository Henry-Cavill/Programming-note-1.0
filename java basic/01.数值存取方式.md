# 计算机存储数值的方式

## 一、原码、反码、补码的基础概念和计算方式

      由计算机的硬件决定，任何存储于计算机中的数据，其本质都是以二进制码存储。
      
      在计算机中，数值一律用补码表示和存储的，本文从原码讲起，通过原码简述反码，补码的作用。
   
注： 
- **机器数：** 一个数字在计算机中的二进制表示形式，叫做这个数的机器数，机器数带符号位，正数的符号位为`0`，负数的符号位为`1`。

- **真值：** 因为第一位是符号位，所以机器数的形式值就不是真正的数值，所以将符号位的数值仅做正负判断，其余数字转换成无符号位的数字的结果为机器数的真值。
### 1、原码
**原码：** 是最简单的机器数表示法，用最高位表示符号位，`1`表示负号，`0`表示正号。其他位存放该数的二进制的绝对值。

```java
[+5]原 = 0000 0101
[-5]原 = 1000 0101
```

### 2、反码
**反码：** 的表示方式和正负数有关
* 正数的反码是其本身。
* 负数的反码是在符号位不变的基础上，对原码的其余个位取反。

```java
[+5]反 = 0000 0101 
[-5]反 = 1111 1010
```

### 3、补码
**补码：** 的表示方式也与其正负数有关
* 正数的补码是其本身。
* 负数的反码是在符号位不变的基础上，对原码的其余个位取反后，加+1。

```java
[+5]反 = 0000 0101 
[-5]反 = 1111 1011
```
三者转换方式
![image](https://user-images.githubusercontent.com/34324161/138724650-316742fc-e9b0-4ad0-b50b-49f28a209555.png)

## 二、 为何要使用原码、反码和补码

计算机可以用三种编码方式表示一个数，对于正数因为三种编码方式的结果都相同：
```java
[+5] = [0000 0101]原 = [0000 0101]反 = [0000 0101]补
```
对于负数而言，其反码和补码是完全不同的。
```java
[-5] = [1000 0101]原 = = [1111 1011]补
```

首先，因为人脑可以知道第一位是符号位，在计算的时候我们会根据符号位，选择对其真值区域的数字进行加减运算，但对于计算机而言，要尽量设计的简单，而且辨别“符号位”的操作，会使得计算机的基础电路设计变得更为复杂，于是人们想出了让符号位也参与运算的方式来计算数值。

为解决原码做减法的问题，出现了反码（因为减一个数的操作就相当于加一个数的相反数）

- 反码计算
 
```java
[-5]+[-5] = [0000 0101]反 + [1111 1010]反  = [1111 1111]反 = [1000 0000]原 = -0 
```
上式可以得出：反码计算减法，其真值部分是正确的，但是'0'居然出现了符号位，但是零带符号位是没有意义的，所以为了解决两个'0'的编码问题，于是采用补码的方式进行计算。

- 反码计算
 
```java
[-5]+[-5] = [0000 0101]补 + [1111 1011]补  = [0000 0000]补 = [0000 0000]原 = 0
```

这样0用[0000 0000]表示, 而以前出现问题的-0则不存在了.而且可以用[1000 0000]表示-128，只是-128无法使用反码和补码的来表示，使用补码, 不仅仅修复了0的符号以及存在两个编码的问题, 而且还能够多表示一个最低数. 这就是为什么8位二进制, 使用原码或反码表示的范围为[-127, +127], 而使用补码表示的范围为[-128, 127]。于是机器数一般均采用**补码**的方式来存储机器数。

